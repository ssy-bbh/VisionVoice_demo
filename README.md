# VisionVoice - 智能 AR 英语词汇学习助手
**版本**: v1.2
**作者**: 宋姚博涵

## 核心功能实现

VisionVoice 是一款基于增强现实（AR）的英语词汇学习助手，旨在通过实时物体识别和自然语言处理，为用户提供沉浸式的词汇学习体验。

1.  **实时物体识别与词汇展示**:
    *   应用利用 **YOLOv8** 模型在安卓设备上实现对真实世界物体的实时检测。
    *   **【核心竞争力】** 识别结果（绿框和标签）实时渲染在 `OverlayView` 上，并加入了**基于时间戳的防闪烁逻辑**（200ms 阈值），确保 AR 标签的稳定性。
2.  **AI 模型集成与优化**:
    *   成功将预训练的 **YOLOv8** 目标检测模型集成到安卓应用中，实现了高效的**端侧实时推理**。
    *   模型文件（如 `yolov8n.tflite`）和标签文件（`labels.txt`）已置于 `app/src/main/assets` 目录下。
3.  **精准的 AR 交互**:
    *   通过 `OverlayView.OnBoxClickListener` 实现了对检测框的点击响应。
    *   **【核心竞争力】** 在 `onTouchEvent` 中采用**倒序遍历**，优先响应和触发被点击的**最上层**检测框，提升了多目标场景下的点击准确性。

### 最核心技术

本项目最核心的技术是**高效的移动端 AI 模型集成与实时、稳定的 AR 渲染/交互**：

*   **高性能 TFLite 推理引擎**: 在 `YoloDetector.kt` 中，采用了 **`ByteBuffer.allocateDirect()`** 和**复用内存**的策略，有效减少了 GC 引起的卡顿。
*   **模型架构兼容性**: **自动检测并支持 NCHW/NHWC 输入格式**及 **Int8/Float32 精度**的 TFLite 模型，增强了模型部署的灵活性和兼容性。
*   **极简高效的坐标映射**: 模型输入处理上，直接采用**全屏拉伸 (Stretch)** 图像到 640x640 进行推理，并利用 YOLO 的鲁棒性实现了**零黑边**的沉浸式识别。
    *   **【算法/坐标竞争力】** 后处理中，坐标**统一还原为归一化 (0~1) 坐标**，随后在 `OverlayView` 中**按此归一化坐标精确地缩放至 View 实际像素尺寸**，简化了 AR 渲染逻辑。
*   **NMS 算法**: 在 `YoloDetector.kt` 中实现了标准的 **NMS (非极大值抑制)** 算法，并使用可调的 IOU 阈值（`0.45f`）来有效去除重叠的冗余检测框。
*   **CameraX 实时流处理**: 在 `RealtimeActivity` 中，通过设置 **16:9 比例**和 **`STRATEGY_KEEP_ONLY_LATEST` 反压策略**来优化相机帧率，并进行**旋转矩阵修正**以保证输入图像方向正确。
*   **状态锁定与同步**: 实现了 **`isResultLocked` 机制**，在用户点击识别框并跳转学习页面的瞬间**锁定相机分析器**，保证了界面跳转的稳定性和当前结果的准确性。
*   **AR 渲染优化**: `OverlayView` 中使用了**静态画笔和复用 RectF 对象**，以及**200ms 阈值的防闪烁逻辑**，确保 AR 标签的绘制性能和稳定性。

## 项目结构

*   **核心代码与开发**: 主要使用 **Kotlin** 语言进行安卓应用的设计、开发和优化。
*   **AI 模型相关**:
    *   模型文件位于：`app/src/main/assets/yolov8n.tflite`
    *   标签文件位于：`app/src/main/assets/labels.txt`
*   **旧版文档/报告**: 请参考 **`PROJECT_REPORT.md`** 文件以获取更早期的文档和设计信息。
*   **系统架构图**: 软件的结构框图（`graphics` 文件夹内）提供了系统的设计概览。

## Android 开发与维护职责

*   **安卓应用开发与维护**: 主要负责现有或新项目的安卓应用设计、开发、测试与部署，利用 **Kotlin** 语言进行高效的功能实现和 UI 优化。
*   **图像数据与 AI 模型集成**: 负责移动端的图像数据采集模块优化，并将预训练的 AI 模型（如 YOLO）集成到安卓应用中，实现实时推理和功能展示。

## 未来计划

*   **后端功能开发**: 完成与当前 AR 识别功能相匹配的后端服务模块（如词汇数据存储、用户学习进度同步等）。

***

*此 README 侧重于核心技术和最新版本 (v1.1) 的实现。*